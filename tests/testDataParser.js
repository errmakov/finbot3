const config = require('../app/config').config;
const consoller = require('../vendors/consoller').consoller;
const mocha = require('mocha');
const chai = require('chai');
chai.use(require("chai-as-promised"));
const assert = chai.assert;



const parser = require('../app/dataParser').dataParser;


const dateSet = Array(
  new Date(1950,04,19,09,15,75,123),
  new Date(2020,00,01,00,01,02,123),
  new Date(2020,11,02,23,49,32,123),
  new Date(2020,11,02,25,49,32,123),
  new Date(2020,12,01,04,25,13,123),
)

const smsSet = {
  0:['Sber 900 <900>: ECMC1730 18:15 Покупка 124р VKUSVILL Баланс: 14696.68р', 124, 'Еда дома', 'VKUSVILL'],
  1:['Sber 900 <900>: ECMC1730 18:15 Покупка 7 283.54р Magnit Баланс: 13654.28р', 7284, 'Еда дома', 'Magnit'],
  2:['Sber 900 <900>: ECMC1730 18:15 Покупка 5432.63р Magnit Баланс: 12154.28р', 5433, 'Еда дома', 'Magnit'],
  3:['Покупка: 1 000 RUB в BEELINE MOB. Карта *5015. Остаток 29 913.34 RUB', 1000, 'Связь', 'BEELINE MOB'],
  4:['Покупка: 599 RUB в GOOGLE*GOOG. Карта *5015. Остаток 144 424.52 RUB', 599, 'Работа', 'GOOGLE*GOOG'],
  5:['Покупка: 11 324.71 RUB в 2CO.com*cre. Карта *5015. Остаток 198 713.73 RUB', 11325, 'Работа', '2CO.com*cre'],
  6:['Sber 900 <900>: ECMC1730 10:27 перевод 41000р Баланс: 10418.99р', 41000, 'Неопределено', null]
};

/* TODO: Вынести подготовку этого массива в отдельный модуль */
const emailSet = Array (
  // '{"attachments":[],"headers":{},"headerLines":[{"key":"received","line":"Received: from mxback23g.mail.yandex.net (localhost [127.0.0.1])by mxback23g.mail.yandex.net with LMTP id jer8b2WP51-ZlG2JrEFfor <definbot@yandex.ru>; Mon, 13 Apr 2020 06:51:20 +0300"},{"key":"received","line":"Received: from mxback23g.mail.yandex.net (localhost.localdomain [127.0.0.1])by mxback23g.mail.yandex.net (Yandex) with ESMTP id 860EB24C1966for <definbot@yandex.ru>; Mon, 13 Apr 2020 06:51:20 +0300 (MSK)"},{"key":"x-yandex-internal","line":"X-Yandex-Internal: 1"},{"key":"received","line":"Received: from iva3-dd2bb2ff2b5f.qloud-c.yandex.net (iva3-dd2bb2ff2b5f.qloud-c.yandex.net [2a02:6b8:c0c:7611:0:640:dd2b:b2ff])by mxback23g.mail.yandex.net (mxback/Yandex) with ESMTP id 3YklqjGSan-pK3aVnGP;Mon, 13 Apr 2020 06:51:20 +0300"},{"key":"x-yandex-front","line":"X-Yandex-Front: mxback23g.mail.yandex.net"},{"key":"x-yandex-timemark","line":"X-Yandex-TimeMark: 1586749880.505"},{"key":"dkim-signature","line":"DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex.ru; s=mail; t=1586749880;bh=QpVOw9lRkSxNY8LpMnbhRurkrK0og4lNofDhjH0g1kE=;h=Subject:To:From:Message-ID:Date;b=aDW1xO2DXNSZuadTakR2wO0ry5mSIsR5/PH21/mfHZbjBX0zrB2quywHQjuqHr4M8 ps/PWVdVfXirZHQRZKstErFVk+Gs55o70w2BO52Qw7/o9KUQb3iXaez4/WZ1GLsKuR XtdIuMtfHn25zTFaOo7a+x1Gcraw74BuOsTxxIOs="},{"key":"authentication-results","line":"Authentication-Results: mxback23g.mail.yandex.net; dkim=pass header.i=@yandex.ru"},{"key":"received","line":"Received: by iva3-dd2bb2ff2b5f.qloud-c.yandex.net (smtp/Yandex) with ESMTPSA id 5vzFlSOu0a-pKWuUFG8;Mon, 13 Apr 2020 06:51:20 +0300(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))(Client certificate not present)"},{"key":"x-yandex-timemark","line":"X-Yandex-TimeMark: 1586749880.071"},{"key":"x-yandex-suid-status","line":"X-Yandex-Suid-Status: 1 1238967317"},{"key":"x-yandex-spam","line":"X-Yandex-Spam: 1"},{"key":"content-type","line":"Content-Type: text/plain; charset=utf-8"},{"key":"from","line":"From: definbot@yandex.ru"},{"key":"to","line":"To: fin bot <definbot@yandex.ru>"},{"key":"subject","line":"Subject: finbot2 test"},{"key":"message-id","line":"Message-ID: <4da5bdd0-2053-fdb9-6eab-d35601e3da34@yandex.ru>"},{"key":"content-transfer-encoding","line":"Content-Transfer-Encoding: quoted-printable"},{"key":"date","line":"Date: Mon, 13 Apr 2020 03:51:19 +0000"},{"key":"mime-version","line":"MIME-Version: 1.0"},{"key":"return-path","line":"Return-Path: definbot@yandex.ru"}],"text":"Sber 900 <900>: ECMC1730 18:15 Покупка 124р VKUSVILL Баланс: 14696.68р","textAsHtml":"<p>Sber 900 &lt;900&gt;: ECMC1730 18:15 &Pcy;&ocy;&kcy;&ucy;&pcy;&kcy;&acy; 124&rcy; VKUSVILL &Bcy;&acy;&lcy;&acy;&ncy;&scy;: 14696.68&rcy;</p>","subject":"finbot2 test","date":"2020-04-13T03:51:19.000Z","to":{"value":[{"address":"definbot@yandex.ru","name":"fin bot"}],"html":"<span class=\\"mp_address_group\\"><span class=\\"mp_address_name\\">fin bot</span> &lt;<a href=\\"mailto:definbot@yandex.ru\\" class=\\"mp_address_email\\">definbot@yandex.ru</a>&gt;</span>","text":"fin bot <definbot@yandex.ru>"},"from":{"value":[{"address":"definbot@yandex.ru","name":""}],"html":"<span class=\\"mp_address_group\\"><a href=\\"mailto:definbot@yandex.ru\\" class=\\"mp_address_email\\">definbot@yandex.ru</a></span>","text":"definbot@yandex.ru"},"messageId":"<4da5bdd0-2053-fdb9-6eab-d35601e3da34@yandex.ru>","html":false}',
  //
  // '{"attachments":[],"headers":{},"headerLines":[{"key":"received","line":"Received: from mxback2q.mail.yandex.net (localhost [127.0.0.1])by mxback2q.mail.yandex.net with LMTP id msAIb2HO0X-0VIJs5Pnfor <definbot@yandex.ru>; Mon, 13 Apr 2020 06:52:47 +0300"},{"key":"received","line":"Received: from mxback2q.mail.yandex.net (localhost [127.0.0.1])by mxback2q.mail.yandex.net (Yandex) with ESMTP id 7F9D2A2A0175for <definbot@yandex.ru>; Mon, 13 Apr 2020 06:52:47 +0300 (MSK)"},{"key":"x-yandex-internal","line":"X-Yandex-Internal: 1"},{"key":"received","line":"Received: from vla3-5ed9a7202853.qloud-c.yandex.net (vla3-5ed9a7202853.qloud-c.yandex.net [2a02:6b8:c15:341d:0:640:5ed9:a720])by mxback2q.mail.yandex.net (mxback/Yandex) with ESMTP id Opsmpnbj99-qlgqO69M;Mon, 13 Apr 2020 06:52:47 +0300"},{"key":"x-yandex-front","line":"X-Yandex-Front: mxback2q.mail.yandex.net"},{"key":"x-yandex-timemark","line":"X-Yandex-TimeMark: 1586749967.457"},{"key":"dkim-signature","line":"DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex.ru; s=mail; t=1586749967;bh=R4KdVgGq9FaD+PAVSwEMwu+fdN6OuxjoRrx0MS1adlg=;h=Subject:To:From:Message-ID:Date;b=os7HIJZnldis9BSrBjr00SwLnyglohiYSP5beDrf1Dezx8okFdVsIQJSkzqaYzSL0 wJ/7t9HoWcAfXcbc4ShnmENWhPnuOQpox/lM8kyuj+WGUKCyAtrk3wu4HGYoYeDe8q yjXVvzko/d2qZ5aUEZN47g61dsEjCe3LQ1+/d6mo="},{"key":"authentication-results","line":"Authentication-Results: mxback2q.mail.yandex.net; dkim=pass header.i=@yandex.ru"},{"key":"received","line":"Received: by vla3-5ed9a7202853.qloud-c.yandex.net (smtp/Yandex) with ESMTPSA id ZVMoXJ5fHB-ql3OGFCM;Mon, 13 Apr 2020 06:52:47 +0300(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))(Client certificate not present)"},{"key":"x-yandex-timemark","line":"X-Yandex-TimeMark: 1586749967.101"},{"key":"x-yandex-suid-status","line":"X-Yandex-Suid-Status: 1 1238967317"},{"key":"x-yandex-spam","line":"X-Yandex-Spam: 1"},{"key":"content-type","line":"Content-Type: text/plain; charset=utf-8"},{"key":"from","line":"From: definbot@yandex.ru"},{"key":"to","line":"To: fin bot <definbot@yandex.ru>"},{"key":"subject","line":"Subject: finbot2 test"},{"key":"message-id","line":"Message-ID: <78e639b4-5719-7f48-12be-d169e381b392@yandex.ru>"},{"key":"content-transfer-encoding","line":"Content-Transfer-Encoding: base64"},{"key":"date","line":"Date: Mon, 13 Apr 2020 03:52:46 +0000"},{"key":"mime-version","line":"MIME-Version: 1.0"},{"key":"return-path","line":"Return-Path: definbot@yandex.ru"}],"text":"Покупка: 599 RUB в GOOGLE*GOOG. Карта *5015. Остаток 144 424.52 RUB","textAsHtml":"<p>&Pcy;&ocy;&kcy;&ucy;&pcy;&kcy;&acy;: 599 RUB &vcy; GOOGLE*GOOG. &Kcy;&acy;&rcy;&tcy;&acy; *5015. &Ocy;&scy;&tcy;&acy;&tcy;&ocy;&kcy; 144 424.52 RUB</p>","subject":"finbot2 test","date":"2020-04-13T03:52:46.000Z","to":{"value":[{"address":"definbot@yandex.ru","name":"fin bot"}],"html":"<span class=\\"mp_address_group\\"><span class=\\"mp_address_name\\">fin bot</span> &lt;<a href=\\"mailto:definbot@yandex.ru\\" class=\\"mp_address_email\\">definbot@yandex.ru</a>&gt;</span>","text":"fin bot <definbot@yandex.ru>"},"from":{"value":[{"address":"definbot@yandex.ru","name":""}],"html":"<span class=\\"mp_address_group\\"><a href=\\"mailto:definbot@yandex.ru\\" class=\\"mp_address_email\\">definbot@yandex.ru</a></span>","text":"definbot@yandex.ru"},"messageId":"<78e639b4-5719-7f48-12be-d169e381b392@yandex.ru>","html":false}',
  //
  // '{"attachments":[],"headers":{},"headerLines":[{"key":"received","line":"Received: from mxback4o.mail.yandex.net (localhost [127.0.0.1])by mxback4o.mail.yandex.net with LMTP id ciTsMUGRZA-OXgrQX76for <definbot@yandex.ru>; Mon, 13 Apr 2020 06:52:47 +0300"},{"key":"received","line":"Received: from mxback4o.mail.yandex.net (localhost.localdomain [127.0.0.1])by mxback4o.mail.yandex.net (Yandex) with ESMTP id 87FB34D63316for <definbot@yandex.ru>; Mon, 13 Apr 2020 06:52:47 +0300 (MSK)"},{"key":"x-yandex-internal","line":"X-Yandex-Internal: 1"},{"key":"received","line":"Received: from myt4-07bed427b9db.qloud-c.yandex.net (myt4-07bed427b9db.qloud-c.yandex.net [2a02:6b8:c00:887:0:640:7be:d427])by mxback4o.mail.yandex.net (mxback/Yandex) with ESMTP id zeVJedosaE-qldK8Bf8;Mon, 13 Apr 2020 06:52:47 +0300"},{"key":"x-yandex-front","line":"X-Yandex-Front: mxback4o.mail.yandex.net"},{"key":"x-yandex-timemark","line":"X-Yandex-TimeMark: 1586749967.497"},{"key":"dkim-signature","line":"DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex.ru; s=mail; t=1586749967;bh=Z+UxLId5AAg3fd0zAbHqhxNjj3PLvcHDOZ5WqMmqREU=;h=Subject:To:From:Message-ID:Date;b=ezj1DmLMwHX8LGIrsovZWi71zhDI77nnpyaoTwvsyMFosR9+dpaXRb2q8vlUy5kuI dgU8symMIjVW6m49nnKjDQoCZ4c5lkvA4Z2OYcbYSwogmmNVSpGAlBHMPk02QPZ0zX FCMjBNsc7UxTtQh3ud/37VIDFxM9EcAEfMEviOmg="},{"key":"authentication-results","line":"Authentication-Results: mxback4o.mail.yandex.net; dkim=pass header.i=@yandex.ru"},{"key":"received","line":"Received: by myt4-07bed427b9db.qloud-c.yandex.net (smtp/Yandex) with ESMTPSA id wNepzc1rja-ql20VNXc;Mon, 13 Apr 2020 06:52:47 +0300(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))(Client certificate not present)"},{"key":"x-yandex-timemark","line":"X-Yandex-TimeMark: 1586749967.098"},{"key":"x-yandex-suid-status","line":"X-Yandex-Suid-Status: 1 1238967317"},{"key":"x-yandex-spam","line":"X-Yandex-Spam: 1"},{"key":"content-type","line":"Content-Type: text/plain; charset=utf-8"},{"key":"from","line":"From: definbot@yandex.ru"},{"key":"to","line":"To: fin bot <definbot@yandex.ru>"},{"key":"subject","line":"Subject: finbot2 test"},{"key":"message-id","line":"Message-ID: <e5cf73af-5bbf-4ba1-0c66-3b4acdb1893e@yandex.ru>"},{"key":"content-transfer-encoding","line":"Content-Transfer-Encoding: base64"},{"key":"date","line":"Date: Mon, 13 Apr 2020 03:52:46 +0000"},{"key":"mime-version","line":"MIME-Version: 1.0"},{"key":"return-path","line":"Return-Path: definbot@yandex.ru"}],"text":"Sber 900 <900>: ECMC1730 18:15 Покупка 7 283.54р Magnit Баланс: 13654.28р","textAsHtml":"<p>Sber 900 &lt;900&gt;: ECMC1730 18:15 &Pcy;&ocy;&kcy;&ucy;&pcy;&kcy;&acy; 7 283.54&rcy; Magnit &Bcy;&acy;&lcy;&acy;&ncy;&scy;: 13654.28&rcy;</p>","subject":"finbot2 test","date":"2020-04-13T03:52:46.000Z","to":{"value":[{"address":"definbot@yandex.ru","name":"fin bot"}],"html":"<span class=\\"mp_address_group\\"><span class=\\"mp_address_name\\">fin bot</span> &lt;<a href=\\"mailto:definbot@yandex.ru\\" class=\\"mp_address_email\\">definbot@yandex.ru</a>&gt;</span>","text":"fin bot <definbot@yandex.ru>"},"from":{"value":[{"address":"definbot@yandex.ru","name":""}],"html":"<span class=\\"mp_address_group\\"><a href=\\"mailto:definbot@yandex.ru\\" class=\\"mp_address_email\\">definbot@yandex.ru</a></span>","text":"definbot@yandex.ru"},"messageId":"<e5cf73af-5bbf-4ba1-0c66-3b4acdb1893e@yandex.ru>","html":false}',

  '{"attachments":[],"headers":{},"headerLines":[{"key":"received","line":"Received: from mxback10j.mail.yandex.net (localhost [127.0.0.1])by mxback10j.mail.yandex.net with LMTP id LILCWqVdfM-6deWOpQAfor <definbot@yandex.ru>; Mon, 13 Apr 2020 06:52:47 +0300"},{"key":"received","line":"Received: from mxback10j.mail.yandex.net (localhost.localdomain [127.0.0.1])by mxback10j.mail.yandex.net (Yandex) with ESMTP id 8CD6A4C417D1for <definbot@yandex.ru>; Mon, 13 Apr 2020 06:52:47 +0300 (MSK)"},{"key":"x-yandex-internal","line":"X-Yandex-Internal: 1"},{"key":"received","line":"Received: from sas1-e20a8b944cac.qloud-c.yandex.net (sas1-e20a8b944cac.qloud-c.yandex.net [2a02:6b8:c14:6696:0:640:e20a:8b94])by mxback10j.mail.yandex.net (mxback/Yandex) with ESMTP id Ds765tWNw2-qlL8TKUP;Mon, 13 Apr 2020 06:52:47 +0300"},{"key":"x-yandex-front","line":"X-Yandex-Front: mxback10j.mail.yandex.net"},{"key":"x-yandex-timemark","line":"X-Yandex-TimeMark: 1586749967.518"},{"key":"dkim-signature","line":"DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex.ru; s=mail; t=1586749967;bh=fu01yEogStbMqLllcYjEaWATh8v8Uzq5ta/slH2/mvU=;h=Subject:To:From:Message-ID:Date;b=DeJBsHdJ512GnGtDGNxHJIueUfi7MOvKXlUJBrbZ3OOd3rEqC6/2I9HqodvoLfzEM r4mDzmiNrkNTt5ozcBZSTRTt9dhbVUP+THF7sn17OVAxiPvAyo95yZjHtZxOmvwAu2 Q8har3CHywA+64lsFANyjgM9xqMXDtrvLcCUm9Fc="},{"key":"authentication-results","line":"Authentication-Results: mxback10j.mail.yandex.net; dkim=pass header.i=@yandex.ru"},{"key":"received","line":"Received: by sas1-e20a8b944cac.qloud-c.yandex.net (smtp/Yandex) with ESMTPSA id SEMTr9xRnV-qlWufFlR;Mon, 13 Apr 2020 06:52:47 +0300(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))(Client certificate not present)"},{"key":"x-yandex-timemark","line":"X-Yandex-TimeMark: 1586749967.124"},{"key":"x-yandex-suid-status","line":"X-Yandex-Suid-Status: 1 1238967317"},{"key":"x-yandex-spam","line":"X-Yandex-Spam: 1"},{"key":"content-type","line":"Content-Type: text/plain; charset=utf-8"},{"key":"from","line":"From: definbot@yandex.ru"},{"key":"to","line":"To: fin bot <definbot@yandex.ru>"},{"key":"subject","line":"Subject: finbot2 test"},{"key":"message-id","line":"Message-ID: <d8db587c-9165-9c27-6d28-97b67010a0d1@yandex.ru>"},{"key":"content-transfer-encoding","line":"Content-Transfer-Encoding: base64"},{"key":"date","line":"Date: Mon, 13 Apr 2020 03:52:46 +0000"},{"key":"mime-version","line":"MIME-Version: 1.0"},{"key":"return-path","line":"Return-Path: definbot@yandex.ru"}],"text": false,"textAsHtml":"<p>&Pcy;&ocy;&kcy;&ucy;&pcy;&kcy;&acy;: 1 000 RUB &vcy; BEELINE MOB. &Kcy;&acy;&rcy;&tcy;&acy; *5015. &Ocy;&scy;&tcy;&acy;&tcy;&ocy;&kcy; 29 913.34 RUB</p>","subject":"finbot2 test","date":"2020-04-13T03:52:46.000Z","to":{"value":[{"address":"definbot@yandex.ru","name":"fin bot"}],"html":"<span class=\\"mp_address_group\\"><span class=\\"mp_address_name\\">fin bot</span> &lt;<a href=\\"mailto:definbot@yandex.ru\\" class=\\"mp_address_email\\">definbot@yandex.ru</a>&gt;</span>","text":"fin bot <definbot@yandex.ru>"},"from":{"value":[{"address":"definbot@yandex.ru","name":""}],"html":"<span class=\\"mp_address_group\\"><a href=\\"mailto:definbot@yandex.ru\\" class=\\"mp_address_email\\">definbot@yandex.ru</a></span>","text":"definbot@yandex.ru"},"messageId":"<d8db587c-9165-9c27-6d28-97b67010a0d1@yandex.ru>","html":"<!DOCTYPE html PUBLIC \\"-//W3C//DTD XHTML 1.0 Transitional//EN\\" \\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\\">\\n<html style=\\"width:100%;height:100%;margin:0px;padding:0px;font-family:verdana, geneva, sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;\\">\\n  <head>\\n    <meta charset=\\"UTF-8\\">\\n    <meta content=\\"width=device-width, initial-scale=1\\" name=\\"viewport\\">\\n    <meta content=\\"telephone=no\\" name=\\"format-detection\\">\\n\\n  <style type=\\"text/css\\">\\n\\t@media only screen and (max-width: 600px){[id=table-content]{padding:20px 10px!important}.mobile-padding{padding-left:10px!important}[class=gmail-fix]{display:none!important}.es-adaptive table td{text-align:center!important}.es-adaptive img{display:inline!important}.es-m-txt-c{text-align:center!important}.es-m-txt-r{text-align:right!important}.es-m-txt-l{text-align:left!important}.es-btn-fw{border-width:10px 0!important;text-align:center!important}.es-adaptive table,.es-btn-fw,.es-btn-fw-brdr,.es-left,.es-right{width:100%!important}.es-content table,.es-header table,.es-footer table,.es-content,.es-footer,.es-header{width:100%!important;max-width:600px!important}.es-adapt-td{display:block!important;width:100%!important}.adapt-img{width:100%!important;height:auto!important}.es-m-p0{padding:0!important}.es-m-p0r{padding-right:0!important}.es-m-p0l{padding-left:0!important}.es-m-p0t{padding-top:0!important}.es-m-p0b{padding-bottom:0!important}.es-m-p20b{padding-bottom:20px!important}.es-hidden{display:none!important}table.es-table-not-adapt,img.es-not-adapt{width:auto!important}[class=gmail-fix]{display:none!important}.es-adaptive table td{text-align:center!important}.es-adaptive img{display:inline!important}.es-m-txt-c{text-align:center!important}.es-m-txt-r{text-align:right!important}.es-m-txt-l{text-align:left!important}.es-btn-fw{border-width:10px 0!important;text-align:center!important}.es-adaptive table,.es-btn-fw,.es-btn-fw-brdr,.es-left,.es-right{width:100%!important}.es-content table,.es-header table,.es-footer table,.es-content,.es-footer,.es-header{width:100%!important;max-width:600px!important}.es-adapt-td{display:block!important;width:100%!important}.adapt-img{width:100%!important;height:auto!important}.es-m-p0{padding:0!important}.es-m-p0r{padding-right:0!important}.es-m-p0l{padding-left:0!important}.es-m-p0t{padding-top:0!important}.es-m-p0b{padding-bottom:0!important}.es-m-p20b{padding-bottom:20px!important}.es-hidden{display:none!important}table.es-table-not-adapt,img.es-not-adapt{width:auto!important}td{width:auto!important}}#outlook a{padding:0}.ExternalClass{width:100%}.ExternalClass,.ExternalClass p,.ExternalClass span,.ExternalClass font,.ExternalClass td,.ExternalClass div{line-height:100%}a:-webkit-any-link{color:#00e}\\n  </style>\\n  </head>\\n  <body style=\\"width:100%;height:100%;margin:0px;padding:0px;font-family:verdana, geneva, sans-serif;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;\\">\\n    <div style=\\"display:none;font-size:1px;color:#ffffff;line-height:1px;max-height:0px;max-width:0px;opacity:0;overflow:hidden;\\"></div>\\n    <div>\\n      <table class=\\"es-wrapper\\" width=\\"100%\\" cellspacing=\\"0\\" cellpadding=\\"0\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;width:100%;height:100%;margin:0;padding:0;background:rgb(246,246,246);\\">\\n        <tbody>\\n          <tr style=\\"border-collapse:collapse;\\">\\n            <td class=\\"esd-email-paddings\\" valign=\\"top\\" style=\\"padding:0;margin:0;\\">\\n              <table class=\\"es-content\\" cellspacing=\\"0\\" cellpadding=\\"0\\" align=\\"center\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;font-size:14px;width:100%;\\">\\n                <tbody>\\n                  <tr style=\\"border-collapse:collapse;\\">\\n                    <td class=\\"esdev-ce-el-temp\\" style=\\"padding:0;margin:0;background-color:rgb(247,243,242);\\" bgcolor=\\"#f7f3f2\\" align=\\"center\\">\\n                      <table class=\\"es-content-body\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:rgb(255,255,255);\\" width=\\"600\\" cellspacing=\\"0\\" cellpadding=\\"0\\" bgcolor=\\"#ffffff\\" align=\\"center\\">\\n                        <tbody>\\n                          <tr style=\\"border-collapse:collapse;\\">\\n                            <td class=\\"es-p10b es-p20r es-p20l mobile-padding\\" style=\\"padding:0;margin:0;padding-left:0px;padding-right:20px;background-color:rgb(247,243,242);\\" bgcolor=\\"#f7f3f2\\" align=\\"left\\">\\n                              <table width=\\"100%\\" cellspacing=\\"0\\" cellpadding=\\"0\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;\\">\\n                                <tbody>\\n                                  <tr style=\\"border-collapse:collapse;\\">\\n                                    <td align=\\"left\\" style=\\"padding:0;margin:0;\\">\\n                                      <table width=\\"100%\\" cellspacing=\\"0\\" cellpadding=\\"0\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;\\">\\n                                        <tbody>\\n                                          <tr style=\\"border-collapse:collapse;\\">\\n                                            <td width=\\"560\\" valign=\\"top\\" align=\\"center\\" style=\\"padding:0;margin:0;\\">\\n                                              <table width=\\"100%\\" cellspacing=\\"0\\" cellpadding=\\"0\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:rgb(247,243,242);\\">\\n                                                <tbody>\\n                                                  <tr style=\\"border-collapse:collapse;\\">\\n                                                    <td align=\\"left\\" style=\\"padding:0;margin:0;padding-top:35px;padding-bottom:35px;\\"> <a href=\\"https://tochka.com/\\" target=\\"_blank\\" style=\\"color:rgb(0,0,0);\\"><img src=\\"https://gallery.mailchimp.com/875e68b3bfddd6ce29d2e4fe4/images/419cfa8e-ece3-4ffe-8487-e69507734d51.png\\" alt=\\"Банк Точка\\" title=\\"Банк Точка\\" width=\\"120\\" style=\\"display:block; border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;\\"></a>\\n                                                  </td>\\n                                                </tr>\\n                                              </tbody>\\n                                            </table>\\n                                          </td>\\n                                        </tr>\\n                                      </tbody>\\n                                    </table>\\n                                  </td>\\n                                </tr>\\n                              </tbody>\\n                            </table>\\n                          </td>\\n                        </tr>\\n                      </tbody>\\n                    </table>\\n                  </td>\\n                </tr>\\n              </tbody>\\n            </table>\\n            <table class=\\"es-content esd-header-popover\\" cellspacing=\\"0\\" cellpadding=\\"0\\" align=\\"center\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;font-size:16px;width:100%;\\">\\n              <tbody>\\n                <tr style=\\"border-collapse:collapse;\\">\\n                  <td style=\\"padding:0;margin:0;background-color:rgb(247,243,242);\\" bgcolor=\\"#f7f3f2\\" align=\\"center\\">\\n                    <table class=\\"es-header-body\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:rgb(255,255,255);padding-top:0px;padding-left:40px;padding-right:0px;padding-bottom:40px;\\" width=\\"600\\" cellspacing=\\"0\\" cellpadding=\\"0\\" bgcolor=\\"#ffffff\\" align=\\"center\\">\\n                      <tbody>\\n                        <tr style=\\"border-collapse:collapse;\\">\\n                          <td class=\\"es-p20t es-p40b es-p20l\\" id=\\"table-content\\" style=\\"padding:0;margin:0;padding-top:40px;padding-left:40px;padding-right:40px;padding-bottom:40px\\" align=\\"left\\">\\n                            <table class=\\"es-left\\" cellspacing=\\"0\\" cellpadding=\\"0\\" align=\\"left\\" width=\\"600\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;float:left;\\">\\n                              <tbody>\\n                                <tr style=\\"border-collapse:collapse;\\">\\n                                  <td class=\\"es-m-p0r es-m-p20b\\" width=\\"100%\\" valign=\\"top\\" align=\\"center\\" style=\\"padding:0;margin:0\\">\\n                                    <table width=\\"100%\\" cellspacing=\\"0\\" cellpadding=\\"0\\" style=\\"color:#222222;mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;\\">\\n                                      <tbody>\\n                                        <tr style=\\"border-collapse:collapse;\\">\\n                                          <td class=\\"es-p10t es-p35b es-p5r\\" align=\\"left\\" style=\\"padding:0;margin:0;padding-bottom:0px;\\">\\n                                            <span>\\n                                                Покупка: 7 479 USD в PMR*ISPSERV. Карта *5015. Остаток 74 800.68 RUB\\n                                            </span>\\n                                              </td>\\n                                            </tr>\\n                                          </tbody>\\n                                        </table>\\n                                      </td>\\n                                    </tr>\\n                                  </tbody>\\n                                </table>\\n                              </td>\\n                            </tr>\\n                          </tbody>\\n                        </table>\\n                      </td>\\n                    </tr>\\n                  </tbody>\\n                </table>\\n                <table class=\\"es-content\\" cellspacing=\\"0\\" cellpadding=\\"0\\" align=\\"center\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;font-size:16px;width:100%;\\">\\n                  <tbody>\\n                    <tr style=\\"border-collapse:collapse;\\">\\n                      <td class=\\"esdev-ce-el-temp\\" style=\\"padding:20px 0 0 0;margin:0;background-color:rgb(247,243,242);\\" bgcolor=\\"#f7f3f2\\" align=\\"center\\">\\n                        <table class=\\"es-content-body\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;background-color:rgb(255,255,255);\\" width=\\"600\\" cellspacing=\\"0\\" cellpadding=\\"0\\" bgcolor=\\"#ffffff\\" align=\\"center\\">\\n                          <tbody>\\n                            <tr style=\\"border-collapse:collapse;\\">\\n                              <td class=\\"es-p10b es-p20r es-p20l mobile-padding\\" style=\\"padding:0;margin:0;padding-bottom:0px;padding-left:0px;padding-right:20px;background-color:rgb(247,243,242);\\" bgcolor=\\"#f7f3f2\\" align=\\"left\\">\\n\\n\\t\\t\\t\\t\\t\\t\\t  <center class=\\"wrapper\\" style=\\"width:100%;table-layout:fixed;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;\\">\\n\\t\\t\\t\\t\\t<div class=\\"webkit\\" style=\\"max-width:600px;\\">\\n\\n\\t\\t\\t\\t\\t\\t<!-- START PREHEADER -->\\n\\t\\t\\t\\t\\t\\t<div id=\\"preheader\\" style=\\"font-family:sans-serif, \'Roboto\';font-size:1px;color:#ffffff;line-height:1px;mso-line-height-rule:exactly;display:none;max-width:0px;max-height:0px;opacity:0;overflow:hidden;mso-hide:all;\\">\\n\\t\\t\\t\\t\\t\\t\\t<!-- Your preheader text goes here -->\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<!-- END PREHEADER -->\\n\\n\\t\\t\\t\\t\\t\\t<!--[if (gte mso 9)|(IE)]>\\n\\t\\t\\t\\t\\t\\t<table width=\\"600\\" align=\\"center\\" border=\\"0\\" cellpadding=\\"0\\" cellspacing=\\"0\\" style=\\"border-spacing:0;font-family:sans-serif, \'Roboto\';\\" >\\n\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<td style=\\"padding-top:0;padding-bottom:0;padding-right:0;padding-left:0;\\" >\\n\\t\\t\\t\\t\\t\\t<![endif]-->\\n\\n\\t\\t\\t\\t\\t\\t<table class=\\"outer\\" align=\\"center\\" border=\\"0\\" cellpadding=\\"0\\" cellspacing=\\"0\\" style=\\"border-spacing:0;font-family:sans-serif, \'Roboto\';Margin:0 auto;width:100%;max-width:600px;\\">\\n\\t\\t\\t\\t\\t\\t\\t<tbody><tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\"two-column padding-topbottom-10\\" style=\\"padding-top:10px;padding-bottom:10px;padding-right:0;padding-left:0;text-align:center;font-size:0;\\">\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!--[if (gte mso 9)|(IE)]>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<table width=\\"100%\\" border=\\"0\\" cellpadding=\\"0\\" cellspacing=\\"0\\" style=\\"border-spacing:0;font-family:sans-serif, \'Roboto\';\\" >\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\"50%\\" valign=\\"top\\" style=\\"padding-top:0;padding-bottom:0;padding-right:0;padding-left:0;\\" >\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<![endif]-->\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div style=\\"float:left; margin-bottom:20px\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table width=\\"100%\\" border=\\"0\\" cellpadding=\\"0\\" cellspacing=\\"0\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody><tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table class=\\"contents\\" border=\\"0\\" cellpadding=\\"0\\" cellspacing=\\"0\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody><tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td align=\\"left\\">\\n                                        <a href=\\"https://tochka.com/\\" target=\\"_blank\\" style=\\"font-weight:bold;font-size:13px;color:#000000;letter-spacing:0;text-decoration:none;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfont-family:verdana, geneva, sans-serif\\">Команда Точки<br>\\n                                          tochka.com</a>\\n                                        </td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody></table>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody></table>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!--[if (gte mso 9)|(IE)]>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\"50%\\" valign=\\"top\\" style=\\"padding-top:0;padding-bottom:0;padding-right:0;padding-left:0;\\" >\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<![endif]-->\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div id=\\"social-media\\" style=\\"width:100%;max-width:300px;display:inline-block;vertical-align:bottom;padding-left:25px;margin-bottom:20px\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table width=\\"100%\\" border=\\"0\\" cellpadding=\\"0\\" cellspacing=\\"0\\" style=\\"border-spacing:0;font-family:sans-serif, \'Roboto\';\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody><tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table class=\\"contents\\" border=\\"0\\" cellpadding=\\"0\\" cellspacing=\\"0\\" style=\\"border-spacing:0;font-family:sans-serif, \'Roboto\';width:100%;font-size:14px;text-align:left;\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody><tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td style=\\"padding-top:0;padding-bottom:0;padding-right:0;padding-left:0;\\">\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table width=\\"100%\\" border=\\"0\\" cellspacing=\\"0\\" cellpadding=\\"0\\" style=\\"border-spacing:0;font-family:sans-serif, \'Roboto\';\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t <tr style=\\"border-collapse:collapse;\\">\\n                                                <td class=\\"es-p30r\\" valign=\\"bottom\\" align=\\"center\\" style=\\"padding:0;margin:0;padding-right:20px;\\"> <a href=\\"https://tochka.com/links/soc_facebook\\" style=\\"color:rgb(0,0,0);\\"><img title=\\"Facebook\\" src=\\"https://gallery.mailchimp.com/875e68b3bfddd6ce29d2e4fe4/images/97449819-97b1-4272-80b8-c453047c7392.png\\" alt=\\"Fb\\" width=\\"24\\" height=\\"24\\" style=\\"display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;\\"></a> </td>\\n                                                <td class=\\"es-p30r\\" valign=\\"bottom\\" align=\\"center\\" style=\\"padding:0;margin:0;padding-right:20px;\\"> <a href=\\"https://tochka.com/links/soc_twitter\\" style=\\"color:rgb(0,0,0);\\"><img title=\\"Twitter\\" src=\\"https://gallery.mailchimp.com/875e68b3bfddd6ce29d2e4fe4/images/159b60dc-1f01-4419-be46-3613a05128f0.png\\" alt=\\"Tw\\" width=\\"24\\" height=\\"24\\" style=\\"display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;\\"></a> </td>\\n                                                <td class=\\"es-p10r\\" valign=\\"bottom\\" align=\\"center\\" style=\\"padding:0;margin:0;padding-right:20px;\\"> <a href=\\"https://tochka.com/links/soc_vk\\" style=\\"color:rgb(0,0,0);\\"><img title=\\"Vkontakte\\" src=\\"https://gallery.mailchimp.com/875e68b3bfddd6ce29d2e4fe4/images/7b6d0806-5027-4753-97a0-1b6f7d5d7a96.png\\" alt=\\"VK\\" width=\\"24\\" height=\\"24\\" style=\\"display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;\\"></a> </td>\\n                                                <td class=\\"es-p10r\\" valign=\\"bottom\\" align=\\"center\\" style=\\"padding:0;margin:0;padding-right:20px;\\"> <a href=\\"https://www.instagram.com/tochka_bank/\\" style=\\"color:rgb(0,0,0);\\"><img title=\\"Instagram\\" src=\\"https://gallery.mailchimp.com/875e68b3bfddd6ce29d2e4fe4/images/46ae4349-e981-468f-81ca-98e0928ca45b.png\\" alt=\\"Instagram\\" width=\\"24\\" height=\\"24\\" style=\\"display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;\\"></a> </td>\\n                                                <td class=\\"es-p10r\\" valign=\\"bottom\\" align=\\"center\\" style=\\"padding:0;margin:0;padding-right:20px;\\"> <a href=\\"https://tele.click/Bank_Tochka\\" style=\\"color:rgb(0,0,0);\\"><img title=\\"Telegram\\" src=\\"https://gallery.mailchimp.com/875e68b3bfddd6ce29d2e4fe4/images/d1b08ceb-56f1-4a35-87d7-9925f13a747b.png\\" alt=\\"Telegram\\" width=\\"24\\" height=\\"24\\" style=\\"display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;\\"></a> </td>\\n                                                <td class=\\"es-p10r\\" valign=\\"bottom\\" align=\\"center\\" style=\\"padding:0;margin:0;padding-right:20px;\\"> <a href=\\"https://itunes.apple.com/ru/app/%D1%82%D0%BE%D1%87%D0%BA%D0%B0/id903786823?mt=8\\" style=\\"color:rgb(0,0,0);\\"><img title=\\"IOS\\" src=\\"https://gallery.mailchimp.com/875e68b3bfddd6ce29d2e4fe4/images/129c063f-ca44-4a62-9ee5-04c42b8c1dbb.png\\" alt=\\"IOS\\" width=\\"24\\" height=\\"30\\" style=\\"display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;\\"></a> </td>\\n                                                <td class=\\"es-p10r\\" valign=\\"bottom\\" align=\\"center\\" style=\\"padding:0;margin:0;padding-right:20px;\\"> <a href=\\"https://play.google.com/store/apps/details?id=ru.zhuck.webapp\\" style=\\"color:rgb(0,0,0);\\"><img title=\\"Android\\" src=\\"https://gallery.mailchimp.com/875e68b3bfddd6ce29d2e4fe4/images/027170eb-239a-4f4f-86ab-8c13eb8bcf8b.png\\" alt=\\"Android\\" width=\\"24\\" height=\\"27\\" style=\\"display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;\\"></a> </td>\\n\\n                                              </tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody></table>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody></table>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody></table>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!--[if (gte mso 9)|(IE)]>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<![endif]-->\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t</tbody></table>\\n\\n\\t\\t\\t\\t\\t\\t<!--[if (gte mso 9)|(IE)]>\\n\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\\t</table>\\n\\t\\t\\t\\t\\t\\t<![endif]-->\\n\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</center>\\n\\n\\n                        </td>\\n                      </tr>\\n                    </tbody>\\n                  </table>\\n                  <table class=\\"es-content esd-footer-popover\\" cellspacing=\\"0\\" cellpadding=\\"0\\" align=\\"center\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;font-size:14px;width:100%;\\">\\n                    <tbody>\\n                      <tr style=\\"border-collapse:collapse;\\">\\n                        <td style=\\"padding:0;margin:0;background-color:rgb(247,243,242);\\" bgcolor=\\"#f7f3f2\\" align=\\"center\\">\\n                          <table class=\\"es-content-body\\" width=\\"600\\" cellspacing=\\"0\\" cellpadding=\\"0\\" align=\\"center\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;\\">\\n                            <tbody>\\n                              <tr style=\\"border-collapse:collapse;\\">\\n                                <td class=\\"es-p25t es-p20r es-p20l mobile-padding\\" align=\\"left\\" style=\\"padding:0;margin:0;padding-left:0px;padding-right:20px;padding-top:0px;\\">\\n                                  <table width=\\"100%\\" cellspacing=\\"0\\" cellpadding=\\"0\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;\\">\\n                                    <tbody>\\n                                      <tr style=\\"border-collapse:collapse;\\">\\n                                        <td width=\\"560\\" valign=\\"top\\" align=\\"center\\" style=\\"padding:0;margin:0;\\">\\n                                          <table width=\\"100%\\" cellspacing=\\"0\\" cellpadding=\\"0\\" style=\\"mso-table-lspace:0pt;mso-table-rspace:0pt;border-collapse:collapse;border-spacing:0px;\\">\\n                                            <tbody>\\n                                              <tr>\\n                                                <td style=\\"font-family:Geometria;font-size:12px;color:#222222;line-height:17px;padding-bottom:40px;\\">\\n                                             Изменить или добавить ещё одну почту для информационных писем можно в разделе <a href=\\"https://z.tochka.com/a/settings/notifications\\" target=\\"_blank\\" style=\\"color:#2C90E9;text-decoration:none;\\">«Настройки и тариф»</a> интернет-банка. Выберите вкладку «Уведомления» и нажмите «Добавить Email» в блоке «Уведомления об операциях по счёту».\\n                                                  </td>\\n\\n                                                </tr>\\n                                              </tbody>\\n                                            </table>\\n                                          </td>\\n                                        </tr>\\n                                      </tbody>\\n                                    </table>\\n                                  </td>\\n                                </tr>\\n                              </tbody>\\n                            </table>\\n                          </td>\\n                        </tr>\\n                      </tbody>\\n                    </table>\\n                  </td>\\n                </tr>\\n              </tbody>\\n            </table>\\n          </div>\\n\\t\\t  <img src=\\"https://z.tochka.com/api/v1/spammer/public/email/tochka.pixel.png?trackId=08xv2qh1/c4b25f38-5d83-4020-a77a-fd3d4bee218a/15f97e4\\">\\n        </body>\\n</html>\\n"}'
 );
 for (let i = 0; i < emailSet.length; i++) {
   emailSet[i] = JSON.parse(emailSet[i], (k,v)=>{
     if (k == 'date') return new Date(v);
     return v;
   });
 }

 const db = require('../app/Db');
 const dbConf = {serviceKey:require('../' + config.firebase.credentialsPath)}
 let dbh;
 db.initDb(dbConf,(err, res)=>{
   dbh = res;
 })



describe('testDataParser()', () => {


  for (let i in smsSet) {
    it("Test dataParser.getPOS returns valid POS (name of POS or false)", function() {
          return assert.deepEqual(parser.getPOS(smsSet[i][0]),smsSet[i][3]);
    });
  }

  for (let i in smsSet) {
    it("Test dataParser.getAmountFromEmailBody returns money", function() {
          return assert.deepEqual(parser.getAmountFromEmailBody(smsSet[i][0]),smsSet[i][1]);
    });
  }



  for (let i in dateSet) {
    it("Test dataParser.convertDate(date) returns dd.mm.yyyy", function() {
          let convDate = parser.convertDate(dateSet[i]);
          assert.isNotNull(convDate.match(/^[\d]{2}.[0|1][\d]{1}.[\d]{4}/));
    });
  }

  for (let i in emailSet) {
    it("Test dataParser.getMonth", function() {
        assert.isNumber(parser.getMonth(emailSet[i].date));
    });
  }

  for (let i in emailSet) {
    it("Test dataParser.getAccount is valid", function() {
        assert.isNotNull(parser.getAccount(parser.getEmailBody(emailSet[i])).match(/^(Сбер|Точка)/));
    })
  }



  for (let i in emailSet) {
    it("Test dataParser.convertDate(date, true) return parsing date&time and it is dd.mm.yyyy HH:ii:ss", function() {
      assert.isNotNull(parser.convertDate(new Date, true).match(/^[\d]{2}.[01][\d]{1}.[\d]{4}\s([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/));
    })
  }


  it("Test dataParser.getArticle fulFilled while called with any not undefined arg", function() {
        return assert.becomes(parser.getArticle('foo bar', dbh), config.firebase.defaultArticle);
  });


  for (let i in smsSet) {
    it("Test dataParser.getArticle returns valid args (needs prepared firebase)", function() {
          return assert.becomes(parser.getArticle(smsSet[i][0], dbh),smsSet[i][2]);
    });
  }

  it("Test dataParser.getArticle fulfilled in default state with empty args", function() {
        return assert.becomes(parser.getArticle(), config.firebase.defaultArticle);
  });



})
